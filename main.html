<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>OTP Entry</title>
  <style>
    /* page layout */
    body {
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
      background: #f7f7f7;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .card {
      width: 880px;
      max-width: 95%;
      background: white;
      border-radius: 8px;
      border: 2px solid #111;
      padding: 36px 48px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      text-align: center;
    }

    #verification_heading {
      margin: 0 0 10px;
      font-size: 22px;
      font-weight: 700;
      color: #111;
    }

    #verification_subtext {
      margin: 0 0 28px;
      font-size: 13px;
      color: #666;
      line-height: 1.4;
    }

    /* code container */
    .code-container {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 20px 0 28px;
    }

    .code {
      width: 68px;
      height: 78px;
      text-align: center;
      font-size: 42px;
      border-radius: 6px;
      border: 1px solid #eee;
      box-shadow: 0 2px 0 rgba(0,0,0,0.02) inset;
      background: #fafafa;
      color: #444;
      transition: border-color .12s, box-shadow .12s;
      outline: none;
      -moz-appearance: textfield;
    }

    .code:focus {
      border-color: #00c3ff;
      box-shadow: 0 3px 12px rgba(0,195,255,0.12);
      background: #fff;
    }

    .note {
      display: inline-block;
      background: #f0f0f0;
      color: #666;
      padding: 12px 18px;
      border-radius: 6px;
      font-size: 13px;
      margin-top: 6px;
    }

    /* small screens */
    @media (max-width: 520px) {
      .code { width: 44px; height: 56px; font-size: 28px; }
      .card { padding: 20px; }
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="verification_heading">
    <h1 id="verification_heading">Verify Your Account</h1>
    <p id="verification_subtext">
      We emailed you the six digit code to <strong>acciojob@email.com</strong>.
      Enter the code below to confirm your email address.
    </p>

    <div class="code-container" aria-label="OTP inputs">
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 1" />
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 2" />
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 3" />
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 4" />
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 5" />
      <input inputmode="numeric" pattern="\d*" maxlength="1" class="code" aria-label="Digit 6" />
    </div>

    <div class="note" aria-hidden="true">
      This is design only. We didn't actually send you an email as we don't have your email, right?
    </div>
  </div>

  <script>
   // otp-script.js
(function () {
  const inputs = Array.from(document.querySelectorAll('.code'));
  if (inputs.length < 6) {
    // if markup is unexpected, gracefully stop
    console.warn('Expected 6 .code inputs; found', inputs.length);
    return;
  }

  // Ensure inputs have the required ids code-1 .. code-6 for tests
  inputs.forEach((inp, i) => {
    inp.id = `code-${i + 1}`;
    // helpful attributes for mobile keyboards and accessibility
    inp.setAttribute('inputmode', 'numeric');
    inp.setAttribute('pattern', '\\d*');
    inp.setAttribute('autocomplete', 'one-time-code');
    inp.setAttribute('aria-label', `Digit ${i + 1}`);
  });

  // Focus first input when DOM is ready
  window.addEventListener('load', () => {
    // small timeout ensures Cypress focus detection is reliable
    setTimeout(() => {
      inputs[0].focus();
      // select text if present
      inputs[0].select && inputs[0].select();
    }, 0);
  });

  // Keep only digits, move forward on input
  function onInput(e) {
    const el = e.target;
    // strip non-digits and only keep last entered char
    const val = (el.value || '').replace(/\D/g, '');
    el.value = val ? val.slice(-1) : '';

    if (el.value !== '') {
      const next = inputs[inputs.indexOf(el) + 1];
      if (next) {
        next.focus();
        // select for easy replacement
        next.select && next.select();
      }
    }
  }

  // Handle keydown (Backspace and arrows)
  function onKeyDown(e) {
    const el = e.target;
    const idx = inputs.indexOf(el);

    if (e.key === 'Backspace') {
      // If current has a digit, clear it and stay
      if (el.value !== '') {
        el.value = '';
        e.preventDefault();
        return;
      }
      // If empty, move focus to previous and clear that
      const prev = inputs[idx - 1];
      if (prev) {
        prev.value = '';
        prev.focus();
        prev.select && prev.select();
        e.preventDefault();
      }
    } else if (e.key === 'ArrowLeft') {
      const prev = inputs[idx - 1];
      if (prev) { prev.focus(); prev.select && prev.select(); e.preventDefault(); }
    } else if (e.key === 'ArrowRight') {
      const next = inputs[idx + 1];
      if (next) { next.focus(); next.select && next.select(); e.preventDefault(); }
    } else {
      // prevent non-digit printable characters
      if (e.key.length === 1 && /\D/.test(e.key)) {
        e.preventDefault();
      }
    }
  }

  // Handle paste: distribute digits starting at focused input
  function onPaste(e) {
    e.preventDefault();
    const paste = (e.clipboardData || window.clipboardData).getData('text') || '';
    const digits = paste.replace(/\D/g, '').split('');
    if (!digits.length) return;

    let idx = inputs.indexOf(e.target);
    for (let d of digits) {
      if (idx >= inputs.length) break;
      inputs[idx].value = d;
      idx++;
    }

    const nextToFocus = inputs[Math.min(idx, inputs.length - 1)];
    nextToFocus.focus();
    nextToFocus.select && nextToFocus.select();
  }

  // Optional: select content on focus so typing replaces existing digit
  function onFocus(e) {
    e.target.select && e.target.select();
  }

  // Attach listeners
  inputs.forEach(inp => {
    inp.addEventListener('input', onInput);
    inp.addEventListener('keydown', onKeyDown);
    inp.addEventListener('paste', onPaste);
    inp.addEventListener('focus', onFocus);
  });

  // Utility to get code
  function getCode() {
    return inputs.map(i => i.value || '').join('');
  }
  window.getOTP = getCode;
})();

  </script>
</body>
</html>
